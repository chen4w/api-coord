---
title: HTTP多次异步请求
date: 2021-10-26 08:59:52
permalink: /pages/0ce146/
---

## 一、概述

!!! tip "提示"

    推荐使用[接入中间件](../../../04.接入中间件/01.1.0/01.前言.md)进行接口存证，可大大减少用户代码量。



> 异步请求，当调用服务方数据时，服务方需要有流程审批等原因，无法同步返回数据。此类情况需要在接口定义时，定义应答方接口规范，并让调用方进行接口实现。
>
> 此示例为最复杂的流程，即调用方进行多次异步请求，服务方进行多次异步请求应答。
>
> 由于是多次请求，代表调用方在一个方法内会进行多次请求。服务方将多次请求的数据进行持久化，然后执行业务流程。执行完成后，将调用方需要的数据通过多次应答，发送给调用方的应答接口。
>
> 此类情况则需要完成多次[存证过程](../../01.前言.md#二、存证过程-概要)，调用方请求时需要进行存证，服务方应答调用方接口后同样需要存证。

## 二、请求步骤

### **请求方**

> 由于是异步请求，请求方需要发送请求，并提供应答方调用接口，用于接收应答数据。

请求：

> 执行多次[单次异步请求](./01.单次异步请求.md#请求方)步骤，每次请求都进行存证

接收应答：

> 1. 获取请求参数及请求头信息
> 2. [数据验签](../../../01.开始/01.引言.md#数据验签)判断权限
> 3. 执行业务操作并构建返回数据结果
> 4. 对返回数据进行[数据签名](../../../01.开始/01.引言.md#数据签名)
> 5. 返回数据及签名信息给请求方

### **服务方**

接收请求：

> 1. 获取请求参数及请求头信息
> 2. [数据验签](../../../01.开始/01.引言.md#数据验签)判断权限
> 3. 将Header对象进行暂存，并构建已经收到请求的返回数据
> 4. 对返回数据进行[数据签名](../../../01.开始/01.引言.md#数据签名)
> 5. 返回数据及签名信息给请求方

应答调用方：

> 执行多次[单次应答调用](./01.单次异步请求.md#服务方)步骤，每次应答都进行存证

## 三、示例

!!! tip "提示"

    使用接入中间件进行HTTP[多次异步请求](../../../04.接入中间件/01.1.0/04.中间件客户端/03.异步请求.md)。


